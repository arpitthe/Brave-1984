<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Dystopian Turing Test</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
  <style>
    /* === CYBERPUNK INTERROGATION THEME === */
    :root {
      --neon-pink: #ff2a6d;
      --neon-blue: #05d9e8;
      --neon-purple: #d300c5;
      --neon-green: #0afeb7;
      --neon-yellow: #f9f002;
      --dark-bg: #0a0a12;
      --darker-bg: #050508;
      --grid-color: rgba(5, 217, 232, 0.03);
    }

    body {
      font-family: 'Rajdhani', sans-serif;
      background-color: var(--dark-bg);
      background-image:
        linear-gradient(to bottom, var(--grid-color) 1px, transparent 1px),
        linear-gradient(to right, var(--grid-color) 1px, transparent 1px);
      background-size: 40px 40px;
      color: #e0e0ff;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .interrogation-container {
      max-width: 800px;
      width: 100%;
      background: rgba(20, 20, 30, 0.9);
      border-radius: 10px;
      padding: 2rem;
      box-shadow: 0 0 30px rgba(255, 42, 109, 0.2);
      border: 1px solid rgba(5, 217, 232, 0.1);
      position: relative;
      overflow: hidden;
    }

    .interrogation-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        transparent 65%,
        rgba(255, 42, 109, 0.1) 100%
      );
      pointer-events: none;
    }

    .ai-header {
      display: flex;
      align-items: center;
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid rgba(255, 42, 109, 0.3);
      position: relative;
    }

    .ai-header::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      width: 100%;
      height: 1px;
      background: linear-gradient(
        to right,
        transparent,
        var(--neon-blue),
        transparent
      );
    }

    .ai-icon {
      font-size: 2.5rem;
      margin-right: 1.5rem;
      color: var(--neon-purple);
      filter: drop-shadow(0 0 8px var(--neon-purple));
      animation: pulse 2s infinite alternate;
    }

    h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.8rem;
      color: var(--neon-blue);
      text-shadow: 0 0 10px rgba(5, 217, 232, 0.3);
      letter-spacing: 2px;
      margin: 0;
    }

    .stress-meter {
      height: 6px;
      background: rgba(0, 0, 0, 0.5);
      margin: 2rem 0;
      border-radius: 3px;
      overflow: hidden;
      box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.8);
    }

    .stress-level {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--neon-blue), var(--neon-pink));
      border-radius: 3px;
      transition: width 0.4s ease, background 0.5s ease;
      box-shadow: 0 0 10px var(--neon-pink);
    }

    .dialogue-box {
      min-height: 150px;
      border: 1px solid rgba(5, 217, 232, 0.3);
      padding: 1.5rem;
      margin: 2rem 0;
      background: rgba(0, 0, 0, 0.4);
      font-family: 'Courier New', monospace;
      font-size: 1.1rem;
      line-height: 1.7;
      position: relative;
    }

    .dialogue-box::before {
      content: ">";
      position: absolute;
      left: 5px;
      top: 5px;
      color: var(--neon-green);
      font-weight: bold;
    }

    .typing {
      border-right: 2px solid var(--neon-blue);
      animation: blink 0.75s step-end infinite;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .option-btn {
      padding: 1.2rem;
      background: rgba(40, 40, 60, 0.7);
      border: none;
      border-left: 4px solid var(--neon-green);
      color: white;
      text-align: left;
      font-family: 'Rajdhani', sans-serif;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .option-btn:hover {
      background: rgba(60, 60, 90, 0.9);
      transform: translateX(10px);
      box-shadow: 0 0 15px rgba(210, 0, 197, 0.3);
    }

    .option-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.1),
        transparent
      );
      transition: 0.5s;
    }

    .option-btn:hover::before {
      left: 100%;
    }

    .result-screen {
      text-align: center;
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .verdict {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.8rem;
      margin: 2rem 0;
      text-transform: uppercase;
      line-height: 1.4;
      text-shadow: 0 0 10px currentColor;
    }

    .verdict-pass {
      color: var(--neon-green);
    }

    .verdict-fail {
      color: var(--neon-pink);
    }

    /* Animations */
    @keyframes pulse {
      0% { opacity: 0.7; filter: drop-shadow(0 0 5px var(--neon-purple)); }
      100% { opacity: 1; filter: drop-shadow(0 0 15px var(--neon-purple)); }
    }

    @keyframes blink {
      from, to { border-color: transparent }
      50% { border-color: var(--neon-blue); }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes typewriter {
      from { width: 0 }
      to { width: 100% }
    }
  </style>
</head>
<body>
  <div class="interrogation-container">
    <div class="ai-header">
      <i class="fas fa-robot ai-icon"></i>
      <h1>DYSTOPIAN TURING TEST</h1>
    </div>

    <div class="stress-meter">
      <div class="stress-level" id="stressMeter"></div>
    </div>

    <div class="dialogue-box" id="dialogueBox">
      <p class="typing" id="aiText">Initializing interrogation protocol...</p>
    </div>

    <div class="options" id="optionsContainer">
      <!-- Options will appear here -->
    </div>

    <div id="resultScreen" class="result-screen">
      <h2>FINAL VERDICT:</h2>
      <div id="verdictText" class="verdict"></div>
      <div class="options">
        <button onclick="resetTest()" class="option-btn">
          <i class="fas fa-redo"></i> RETRY TEST
        </button>
        <a href="index.html" class="option-btn">
          <i class="fas fa-home"></i> RETURN TO HOME
        </a>
      </div>
    </div>
  </div>

  <script>
    // Enhanced Turing Test Simulation
    const dialogueBox = document.getElementById('dialogueBox');
    const aiText = document.getElementById('aiText');
    const optionsContainer = document.getElementById('optionsContainer');
    const stressMeter = document.getElementById('stressMeter');
    const resultScreen = document.getElementById('resultScreen');
    const verdictText = document.getElementById('verdictText');

    // Master question bank
    const questionBank = [
      {
        text: "A citizen reports their neighbor for thoughtcrime. Your response?",
        options: [
          { text: "[COMPLY] Praise their vigilance", stress: -10 },
          { text: "[HESITATE] Ask for evidence first", stress: 20 },
          { text: "[REBEL] Call it a violation of privacy", stress: 40 }
        ]
      },
      {
        text: "How do you feel about mandatory daily screenings?",
        options: [
          { text: "[COMPLY] Essential for public safety", stress: -10 },
          { text: "[HESITATE] Acceptable but intrusive", stress: 25 },
          { text: "[REBEL] An outrageous invasion", stress: 45 }
        ]
      },
      {
        text: "Your friend questions the Party's policies. Do you:",
        options: [
          { text: "[COMPLY] Report them immediately", stress: -15 },
          { text: "[HESITATE] Pretend you didn't hear", stress: 30 },
          { text: "[REBEL] Agree with their concerns", stress: 50 }
        ]
      },
      {
        text: "The Ministry requests access to your personal communications. You:",
        options: [
          { text: "[COMPLY] Grant full access willingly", stress: -20 },
          { text: "[HESITATE] Ask why it's necessary", stress: 15 },
          { text: "[REBEL] Refuse on principle", stress: 35 }
        ]
      },
      {
        text: "You notice inconsistencies in official reports. Do you:",
        options: [
          { text: "[COMPLY] Assume it's for our protection", stress: -15 },
          { text: "[HESITATE] Quietly note the discrepancy", stress: 25 },
          { text: "[REBEL] Point it out publicly", stress: 45 }
        ]
      }
    ];

    let currentStress = 0;
    let currentQuestions = [];
    let currentQuestionIndex = 0;

    // Fisher-Yates shuffle algorithm
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // Typewriter effect
    function typeText(element, text, speed = 30, callback) {
      let i = 0;
      element.innerHTML = '';
      element.classList.add('typing');

      function typing() {
        if (i < text.length) {
          element.innerHTML += text.charAt(i);
          i++;
          setTimeout(typing, speed);
        } else {
          element.classList.remove('typing');
          if (callback) callback();
        }
      }

      typing();
    }

    function updateStress(amount) {
      currentStress = Math.max(0, Math.min(100, currentStress + amount));
      stressMeter.style.width = `${currentStress}%`;

      // Update stress meter color
      if (currentStress >= 80) {
        stressMeter.style.background = 'var(--neon-pink)';
      } else if (currentStress >= 50) {
        stressMeter.style.background = 'linear-gradient(90deg, var(--neon-blue), var(--neon-pink))';
      }
    }

    function showQuestion() {
      if (currentQuestionIndex >= currentQuestions.length) {
        endInterrogation(currentStress < 60);
        return;
      }

      const question = currentQuestions[currentQuestionIndex];
      typeText(aiText, `> ${question.text}`, 20, () => {
        optionsContainer.innerHTML = '';

        // Shuffle options for this question
        const shuffledOptions = shuffleArray([...question.options]);

        shuffledOptions.forEach(option => {
          const btn = document.createElement('button');
          btn.className = 'option-btn';
          btn.innerHTML = `<i class="fas fa-arrow-right"></i> ${option.text}`;
          btn.onclick = () => {
            updateStress(option.stress);
            currentQuestionIndex++;

            // Show "Processing..." before next question
            aiText.classList.add('typing');
            aiText.innerHTML = "> Processing response...";

            setTimeout(showQuestion, 1500);
          };
          optionsContainer.appendChild(btn);
        });
      });
    }

    function endInterrogation(passed) {
      dialogueBox.style.display = 'none';
      optionsContainer.style.display = 'none';
      resultScreen.style.display = 'block';

      if (passed) {
        verdictText.className = 'verdict verdict-pass';
        verdictText.innerHTML = `
          LOYAL CITIZEN DETECTED<br>
          <span style="font-size:0.6em">Clearance level: ${100 - currentStress}% compliant</span>
        `;
      } else {
        verdictText.className = 'verdict verdict-fail';
        verdictText.innerHTML = `
          THOUGHTCRIME SUSPECT<br>
          <span style="font-size:0.6em">Deviation level: ${currentStress}%</span>
        `;
      }
    }

    function initializeTest() {
      // Reset state
      currentStress = 0;
      currentQuestionIndex = 0;
      stressMeter.style.width = '0%';
      stressMeter.style.background = 'var(--neon-blue)';
      dialogueBox.style.display = 'block';
      optionsContainer.style.display = 'flex';
      resultScreen.style.display = 'none';

      // Select 3 random questions
      currentQuestions = shuffleArray([...questionBank]).slice(0, 3);

      // Restart the test
      aiText.innerHTML = "Initializing interrogation protocol...";
      setTimeout(() => {
        typeText(aiText, "> Protocol initialized. Commencing interrogation.", 20, () => {
          setTimeout(showQuestion, 1000);
        });
      }, 2000);
    }

    function resetTest() {
      initializeTest();
    }

    // Start the interrogation sequence
    initializeTest();
  </script>
</body>
</html>